From: Carlos Garnacho <carlosg@gnome.org>
Date: Fri, 6 Nov 2020 17:59:33 +0100
Subject: clutter/event: Do not filter out DEVICE_ADDED/REMOVED events

These devices in x11 are "disabled", that doesn't mean we should refrain
from notifying about them.

https://gitlab.gnome.org/GNOME/mutter/-/merge_requests/1553

(cherry-picked from commit 34710eabc0dc2154d26296f3121728683af4afe6)

Bug: https://gitlab.gnome.org/GNOME/mutter/-/issues/1476
Bug: https://gitlab.gnome.org/GNOME/mutter/-/issues/1496
Bug-Ubuntu: https://launchpad.net/bugs/1899206
Bug-Ubuntu: https://launchpad.net/bugs/1899509
Origin: upstream, 3.38.2
---
 clutter/clutter/clutter-event.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/clutter/clutter/clutter-event.c b/clutter/clutter/clutter-event.c
index 51bec88..9fa32df 100644
--- a/clutter/clutter/clutter-event.c
+++ b/clutter/clutter/clutter-event.c
@@ -1577,7 +1577,9 @@ _clutter_event_push (const ClutterEvent *event,
   device = clutter_event_get_device (event);
   if (device != NULL)
     {
-      if (!clutter_input_device_get_enabled (device))
+      if (event->type != CLUTTER_DEVICE_ADDED &&
+          event->type != CLUTTER_DEVICE_REMOVED &&
+          !clutter_input_device_get_enabled (device))
         return;
     }
 
